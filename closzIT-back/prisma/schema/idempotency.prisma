/// 멱등성 요청 상태
enum IdempotencyStatus {
  PROCESSING
  COMPLETED
  FAILED
}

/// 멱등성 관리 테이블
model IdempotencyKey {
  key           String             @id
  endpoint      String
  requestHash   String             @map("request_hash")
  status        IdempotencyStatus  @default(PROCESSING)
  responseCode  Int?               @map("response_code")
  responseBody  Json?              @map("response_body")
  createdAt     DateTime           @default(now()) @map("created_at")
  expiresAt     DateTime           @map("expires_at")

  @@map("idempotency_keys")
  @@index([expiresAt])
  @@index([status])
}